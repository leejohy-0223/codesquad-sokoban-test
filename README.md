## 3ë‹¨ê³„ : ì†Œì½”ë°˜ ê²Œì„ ì™„ì„±í•˜ê¸° 

<details>
<summary> ë¬¸ì œ ì„¤ëª… ë° ìš”êµ¬ì‚¬í•­ </summary>

### ë¬¸ì œ ì„¤ëª…
- ì •ìƒì ì¸ ì†Œì½”ë°˜ ê²Œì„ì„ ì™„ì„±í•œë‹¤.
- ì°¸ê³  ë§í¬ : [ì†Œì½”ë°˜ ê²Œì„](https://www.cbc.ca/kids/games/play/sokoban)

<br>

#### ìš”êµ¬ì‚¬í•­
- ë‚œì´ë„ë¥¼ ê³ ë ¤í•˜ì—¬ ìŠ¤í…Œì´ì§€ 1ë¶€í„° 5ê¹Œì§€ í”Œë ˆì´ ê°€ëŠ¥í•œ map.txt íŒŒì¼ì„ ìŠ¤ìŠ¤ë¡œ ì‘ì„±í•œë‹¤.
- ì§€ë„ íŒŒì¼ map.txtë¥¼ ë¬¸ìì—´ë¡œ ì½ì–´ì„œ ì²˜ë¦¬í•˜ë„ë¡ ê°œì„ í•œë‹¤.
- ì²˜ìŒ ì‹œì‘ ì‹œ Stage 1ì˜ ì§€ë„ì™€ í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œëœë‹¤.
- r ëª…ë ¹ ì…ë ¥ ì‹œ ìŠ¤í…Œì´ì§€ë¥¼ ì´ˆê¸°í™” í•œë‹¤.
- ëª¨ë“  oë¥¼ Oìë¦¬ì— ì´ë™ì‹œí‚¤ë©´ í´ë¦¬ì–´ í™”ë©´ì„ í‘œì‹œí•˜ê³  ë‹¤ìŒ ìŠ¤í…Œì´ì§€ë¡œ ì´ë™í•œë‹¤.
- ì£¼ì–´ì§„ ëª¨ë“  ìŠ¤í…Œì´ì§€ë¥¼ í´ë¦¬ì–´ ì‹œ ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  ê²Œì„ì„ ì¢…ë£Œí•œë‹¤.

<br>

#### ì°¸ê³  : í”Œë ˆì´ì–´ ì´ë™ ì¡°ê±´
- í”Œë ˆì´ì–´ëŠ” oë¥¼ ë°€ì–´ì„œë§Œ ì´ë™ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- oë¥¼ O ì§€ì ì— ë°€ì–´ ë„£ìœ¼ë©´ 0ìœ¼ë¡œ ë³€ê²½ëœë‹¤.
- í”Œë ˆì´ì–´ëŠ” Oë¥¼ í†µê³¼í•  ìˆ˜ ìˆë‹¤.
- í”Œë ˆì´ì–´ëŠ” #ì„ í†µê³¼í•  ìˆ˜ ì—†ë‹¤.
- 0 ìƒíƒœì˜ oë¥¼ ë°€ì–´ë‚´ë©´ ë‹¤ì‹œ oì™€ Oë¡œ ë¶„ë¦¬ëœë‹¤.
- í”Œë ˆì´ì–´ê°€ ì›€ì§ì¼ ë•Œë§ˆë‹¤ í„´ìˆ˜ë¥¼ ì¹´ìš´íŠ¸ í•œë‹¤.
- ìƒìê°€ ë‘ ê°œ ì—°ì†ìœ¼ë¡œ ë¶™ì–´ìˆëŠ” ê²½ìš° ë°€ ìˆ˜ ì—†ë‹¤. ìƒì ë’¤ì— ê³µë°±ì´ ìˆì„ ê²½ìš°ì—ë§Œ ë°€ ìˆ˜ ìˆë‹¤.
- ê¸°íƒ€ í•„ìš”í•œ ë¡œì§ì€ ì‹¤ì œ ê²Œì„ì„ ì°¸ê³ í•´ì„œ ì™„ì„±í•œë‹¤.

<br>

#### ì‹¤í–‰ ì˜ˆì‹œ
```
ì†Œì½”ë°˜ì˜ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!
^ì˜¤^

Stage 1

#####
#OoP#
#####

SOKOBAN> A

#####
#0P #
#####

ë¹ ë°¤! Stage 1 í´ë¦¬ì–´!
í„´ìˆ˜: 1

Stage 2
...

Stage 5
...

ë¹ ë°¤! Stage 5 í´ë¦¬ì–´!
í„´ìˆ˜: 5

ì „ì²´ ê²Œì„ì„ í´ë¦¬ì–´í•˜ì…¨ìŠµë‹ˆë‹¤!
ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! 
```

<br>

### 3ë‹¨ê³„ ì½”ë”© ìš”êµ¬ì‚¬í•­

- ê°€ëŠ¥í•œ í•œ ì»¤ë°‹ì„ ìì£¼ í•˜ê³  êµ¬í˜„ì˜ ì˜ë¯¸ê°€ ëª…í™•í•˜ê²Œ ì „ë‹¬ë˜ë„ë¡ ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•œë‹¤.
- í•¨ìˆ˜ë‚˜ ë©”ì„œë“œëŠ” í•œ ë²ˆì— í•œ ê°€ì§€ ì¼ì„ í•˜ê³  ê°€ëŠ¥í•˜ë©´ 20ì¤„ì´ ë„˜ì§€ ì•Šë„ë¡ êµ¬í˜„í•œë‹¤.
- í•¨ìˆ˜ë‚˜ ë©”ì„œë“œì˜ ë“¤ì—¬ì“°ê¸°ë¥¼ ê°€ëŠ¥í•˜ë©´ ì ê²Œ(3ë‹¨ê³„ê¹Œì§€ë§Œ) í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•œë‹¤.

```
  function main() {
        for() { // ë“¤ì—¬ì“°ê¸° 1ë‹¨ê³„
            if() { // ë“¤ì—¬ì“°ê¸° 2ë‹¨ê³„
                return; // ë“¤ì—¬ì“°ê¸° 3ë‹¨ê³„
            }
        }
    }
```

</details>

<details>
<summary> êµ¬í˜„ ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ </summary>

#### 1. ê²Œì„ ì‹œì‘

```
ì†Œì½”ë°˜ì˜ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!

< Stage 1 >

#####
#OoP#
#####

SOKOBAN> 
```
<br>

#### 2. ì…ë ¥ (ë¯¸ì…˜ í´ë¦¬ì–´)

```
SOKOBAN> a // ì™¼ìª½ ì´ë™

#####
#0P #
#####

A: ì™¼ìª½ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.

< ë¹ ë°¤! Stage 1 í´ë¦¬ì–´! >
[ í„´ìˆ˜ : 1 ]

< Stage 2 >

######
#  P #
#o####
# #   
#O#   
###   

SOKOBAN> 
```
- ì´ë™ ì‹œ êµ¬ë©(O)ê³¼ ê³µ(o)ê°€ ê²¹ì³ì§€ë©´ 0ìœ¼ë¡œ ë³€ê²½ëœë‹¤.
- ëª¨ë“  êµ¬ë©ê³¼ ê³µì´ ê²¹ì¹˜ì§€ë©´ ë¯¸ì…˜ í´ë¦¬ì–´. í„´ ìˆ˜ë¥¼ ì¶œë ¥í•˜ê³  ë‹¤ìŒ ë¼ìš´ë“œë¡œ ë„˜ì–´ê°„ë‹¤.

<br>

#### 3. ì…ë ¥ (ë¶ˆê°€ëŠ¥í•œ ì´ë™)
```
SOKOBAN> d // ì˜¤ë¥¸ìª½ ì´ë™

######
#   P#
#o####
# #   
#O#   
###   

D: (ê²½ê³ !) í•´ë‹¹ ëª…ë ¹ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
SOKOBAN> z // ì—†ëŠ” ëª…ë ¹

######
#   P#
#o####
# #   
#O#   
###   

Z: (ê²½ê³ !) í•´ë‹¹ ëª…ë ¹ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
```
- í˜„ ìœ„ì¹˜ì—ì„œ ë¶ˆê°€ëŠ¥í•œ ì´ë™ ë˜ëŠ” ì§€ì •ë˜ì§€ ì•Šì€ ëª…ë ¹ì–´ê°€ ì…ë ¥ë  ê²½ìš°, ê²½ê³ ë¥¼ ì¶œë ¥í•œ í›„ ë‹¤ì‹œ ì…ë ¥ë°›ëŠ”ë‹¤.

<br>

#### 4. ì…ë ¥ (ìŠ¤í…Œì´ì§€ ìŠ¤í‚µ)
```
< Stage 4 >

###### 
#P   ##
# oo  #
# #O O#
#     #
#######

SOKOBAN> q // ìŠ¤í‚µ ëª…ë ¹ : q
ìŠ¤í…Œì´ì§€ë¥¼ ìŠ¤í‚µí•©ë‹ˆë‹¤

< ë¹ ë°¤! Stage 4 í´ë¦¬ì–´! >
[ í„´ìˆ˜ : 0 ]
```
- í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ që¥¼ ì…ë ¥í•˜ë©´, í•´ë‹¹ ìŠ¤í…Œì´ì§€ë¥¼ ìŠ¤í‚µí•  ìˆ˜ ìˆë‹¤.

<br>

#### 5. ì…ë ¥ (ë¦¬ì…‹)

```
  #### 
###  # 
#P Oo##
#   o #
# #O  #
#     #
#######

SOKOBAN> d

  #### 
###  # 
# POo##
#   o #
# #O  #
#     #
#######

D: ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
SOKOBAN> s

  #### 
###  # 
#  Oo##
# P o #
# #O  #
#     #
#######

S: ì•„ë˜ìª½ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
SOKOBAN> r
Stage 5ê°€ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤.

  #### 
###  # 
#P Oo##
#   o #
# #O  #
#     #
#######
```
- ì´ë™ ì¤‘ rì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ stageë¥¼ ì´ˆê¸°í™” í•œë‹¤.
- ì´ë™ íšŸìˆ˜ë„ 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤.

<br>

#### 6. ê²Œì„ ì¢…ë£Œ
```
< ë¹ ë°¤! Stage 5 í´ë¦¬ì–´! >
[ í„´ìˆ˜ : 0 ]

ì „ì²´ ê²Œì„ì„ í´ë¦¬ì–´í•˜ì…¨ìŠµë‹ˆë‹¤!
ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!
```
- ëª¨ë“  Stage ì¢…ë£Œ ì‹œ, ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  ì¢…ë£Œëœë‹¤.

</details>

<br> 

#### ğŸ‘‰ğŸ» ì°¸ê³  Repository : [GitHub Step3 Repository](https://github.com/leejohy-0223/codesquad-sokoban-test/tree/step3)

## ğŸš€ ì‹¤í–‰ 
- Git, JavaëŠ” ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ê³  ê°€ì •í•œë‹¤.
- step3 revision Id : 
```
$ git clone https://gist.github.com/fa8eb5f185967321dd0fb9a81fdc5baa.git step3
$ cd step3
$ git checkout step3_ë¦¬ë¹„ì ¼_id
$ javac *.java
$ java Application stageMap.txt
```
- ìœ„ì™€ ê°™ì´ gist repositoryë¥¼ í†µí•œ ì‹¤í–‰ì´ ì•ˆ ë  ê²½ìš°, [GitHub Step3 Repository](https://github.com/leejohy-0223/codesquad-sokoban-test/tree/step3) ì—ì„œ í”„ë¡œì íŠ¸ cloneì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•œë‹¤.
```
$ git clone https://github.com/leejohy-0223/codesquad-sokoban-test.git
$ cd codesquad-sokoban-test
$ git checkout step3
$ ./gradlew clean build
$ java -jar build/libs/codesquad-sokoban-test-1.0-SNAPSHOT.jar src/main/resources/stageMap.txt
```

<br>

## ğŸ“ í’€ì´

- map.txtë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” InputView ë©”ì„œë“œë¥¼ ìƒì„±í•œë‹¤.
- ì´ˆê¸°í™”(reset) ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤. txtë¡œ ë¶€í„° map ì •ë³´ë¥¼ Listë¡œ ë¬¶ì–´ì„œ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤í•œë‹¤.
- o(ball) + O(hall) = 0ì´ ë˜ë¯€ë¡œ, 0ì˜ ê°œìˆ˜ì™€ ì²˜ìŒ ì´ˆê¸°í™” ëœ ballì˜ ê°œìˆ˜ê°€ ë™ì¼í•´ì§ˆ ê²½ìš° ë‹¤ìŒ ìŠ¤í…Œì´ì§€ë¡œ ë„˜ì–´ê°„ë‹¤.
- í”Œë ˆì´ì–´ì˜ í„´ ìˆ˜ë¥¼ ì¹´ìš´íŠ¸ í•œë‹¤. ë§¤ ìŠ¤í…Œì´ì§€ë§ˆë‹¤ ëª‡ í„´ ê±¸ë ¸ëŠ”ì§€ ì¶œë ¥í•œë‹¤.
- ball + hall => 0 ìœ¼ë¡œ í‘œí˜„ëœë‹¤.
- player + hall => * (asterisk) ë¡œ í‘œí˜„ëœë‹¤.

<br>

## ğŸ”§ êµ¬í˜„ 
- ì£¼ìš” ë¡œì§ì— ëŒ€í•œ ë©”ì„œë“œ ì„¤ëª…ì„ ì‘ì„±í•œë‹¤.
- ê¸°ì¡´ê³¼ ë™ì¼í•œ ë©”ì„œë“œ ì„¤ëª…ì€ ìƒëµí•œë‹¤.

<br>

#### 1. Application 
- Step 1 : ì§€ì •ëœ String ì…ë ¥ì„ ë°›ì•„ ì „ì²´ì ì¸ íë¦„ì„ êµ¬ì„±í•œë‹¤.
- Step 2 : ëª‡ ë²ˆì§¸ Stageë¥¼ ì‹œì‘í•  ì§€ ì¶”ê°€ë¡œ ì „ë‹¬í•œë‹¤.
- Step 3 : mainì˜ argsë¡œ ë„˜ì–´ì˜¤ëŠ” ì¸ìë¥¼ InputViewë¡œ ì „ë‹¬í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.

<br>

#### 2. StageMapReader 
- Step 1 : Applicationìœ¼ë¡œë¶€í„° ì „ë‹¬ë°›ì€ Stringì„ parsingí•´ì„œ StageMap ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ë˜í•œ StageMap ê°ì²´ì— ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤.
- Step 2 : Applicationìœ¼ë¡œë¶€í„° ì „ë‹¬ë°›ì€ stage Numberì— í•´ë‹¹í•˜ëŠ” StageMap ê°ì²´ë¥¼ ê°€ì ¸ì™€ GameControllerì— ì „ë‹¬í•œë‹¤. 
- Step 3 : ê¸°ì¡´ì˜ ì…ë ¥ Stringì— ëŒ€í•œ Parsing ì—­í• ì„ ìƒˆë¡œìš´ ê°ì²´ì¸ StageRepositoryë¡œ í• ë‹¹í–ˆë‹¤. í•„ìš”í•œ ì´ˆê¸°í™”ëŠ” StageRepositoryë¥¼ í†µí•´ ì§„í–‰í•œë‹¤.

<br>

#### 3. StageMap
- Step 1 : ì§€ë„ ë°ì´í„°ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , PlayerPosition ê°ì²´ë¥¼ ê°€ì§„ë‹¤.
- Step 2 : GameControllerë¡œë¶€í„° ì´ë™ ì •ë³´ë¥¼ ë°›ì•„ PlayerPositionì„ ë³€ê²½ì‹œí‚¨ë‹¤.
- Step 3 : ì…ë ¥ì— ëŒ€í•œ ì´ë™ ë¡œì§ì´ ì£¼ë¡œ ì¶”ê°€ë˜ì—ˆë‹¤.

<br>

#### 4. PlayerPosition
- Step 1 : Playerì˜ í¬ì§€ì…˜ ì •ë³´ë¥¼ ê°€ì§€ëŠ” ê°ì²´ì´ë‹¤.
- Step 2 : ë™ì¼
- Step 3 : ë™ì¼

<br>  

#### 5. ValueMapper
- Step 1 : ê¸°í˜¸(char)ì™€ ì €ì¥ê°’(int)ì„ ê´€ë¦¬í•˜ëŠ” Mapì„ ê°€ì§€ë©°, í•„ìš”í•œ ê°ì²´ì—ê²Œ ì œê³µí•œë‹¤.
- Step 2 : ë™ì¼
- Step 3 : ë¡œì§ì€ ë™ì¼í•˜ë‚˜, Constant(ìƒìˆ˜)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì˜€ë‹¤.

<br>

#### 6. (Step2ë¶€í„° ì¶”ê°€) DirectionValue
- Step 2 : ë°©í–¥ì— ë”°ë¥¸ ë°©í–¥ ì´ë¦„, ê¸°í˜¸, ì´ë™ëŸ‰ì„ ê°€ì§€ëŠ” Enum ì´ë‹¤.
- Step 3 : ë™ì¼

<br>

#### 7. (Step2ë¶€í„° ì¶”ê°€) GameController
- Step 2 : StageMapReaderë¡œ ë¶€í„° StageMap ê°ì²´ë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤. ì‚¬ìš©ì ì…ë ¥ì„ ë°›ì•„ Enumìœ¼ë¡œ ë³€ê²½ í›„ StageMapì— ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.
- Step 3 : ë¦¬ì…‹ ë° game Finish ë¡œì§ì„ ì¶”ê°€í–ˆë‹¤.

<br>

#### 8. (Step2ë¶€í„° ì¶”ê°€) InputView
- Step 2 : ì‚¬ìš©ì ì…ë ¥ ë‹´ë‹¹ì„ í•œë‹¤. 
- Step 3 : FileReaderì™€ BufferedReaderë¥¼ í†µí•´ Application.main ë©”ì„œë“œë¡œ ì „ë‹¬ë˜ëŠ” íŒŒë¼ë¯¸í„°ì™€ ì¼ì¹˜í•˜ëŠ” íŒŒì¼ì„ ì°¾ì•„ ë‚´ìš©ì„ Stringìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ì—­í• ì´ ì¶”ê°€ ë˜ì—ˆë‹¤. 

<br> 

#### 9. (Step3ë¶€í„° ì¶”ê°€) Constant
- Step 3 : ìƒìˆ˜ë¥¼ ê´€ë¦¬í•˜ë©°, ê¸°ë³¸ ìë£Œí˜•(primitive types)ì— ì˜ë¯¸ë¥¼ ë¶€ì—¬í–ˆë‹¤.

<br>

#### 10. (Step3ë¶€í„° ì¶”ê°€) StageRepository
- Step 3 : ì²˜ìŒì— ì…ë ¥ëœ ì§€ë„ë¥¼ ì €ì¥í•˜ì—¬, resetì— í™œìš©í•˜ê¸° ìœ„í•œ ê°ì²´ì´ë‹¤. ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ëœë‹¤.

<br>

### 1. Application
> **main ë©”ì„œë“œ** 
```java
    public static void main(String[] args) {
        String mapInput = InputView.makeMapInformation(args[0]);
        StageMapReader mapReader = StageMapReader.initialMapReader(new ArrayList<>(), mapInput);
        mapReader.startStage();
    }
```
- ``InputView``ë¡œ ë¶€í„° Stringìœ¼ë¡œ ë³€í™˜ëœ ì…ë ¥ì„ ``StageMapReader``ë¡œ ì „ë‹¬í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
- ``startStage``ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ Stageë¥¼ ì‹œì‘í•œë‹¤.

<br>

### 2. StageMapReader
> **ë³€ìˆ˜ ë° ìƒì„±ì**
```java
    private final StageRepository stageRepository;
    private List<StageMap> stageMaps;

    private StageMapReader(List<StageMap> stageMaps, StageRepository stageRepository) {
        this.stageMaps = stageMaps;
        this.stageRepository = stageRepository;
    }

    public static StageMapReader initialMapReader(List<StageMap> stageMaps, String mapInput) {
        StageRepository repository = StageRepository.makeRepository();
        repository.makeInnerMapValue(mapInput);
        return new StageMapReader(stageMaps, repository);
    }
```
- Stringì„ parsing í•˜ëŠ” ë¡œì§ì„``StageRepository``ìœ¼ë¡œ ì˜®ê¸°ê³  ë³€ìˆ˜ë¡œ ê°€ì§€ë„ë¡ ë³€ê²½í•˜ì˜€ë‹¤.
- ``initialMapReader``ë©”ì„œë“œ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ ``StageRepository``ë¥¼ ìƒì„± ë° ì´ˆê¸°í™”í•œë‹¤.

<br>

> **ì£¼ìš” ë©”ì„œë“œ**
```java
    public void startStage() {
        initialStage();
        System.out.println("ì†Œì½”ë°˜ì˜ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!\n");
        for (StageMap stageMap : stageMaps) {
            GameController.gameStart(stageMap, stageRepository);
        }
        System.out.println("ì „ì²´ ê²Œì„ì„ í´ë¦¬ì–´í•˜ì…¨ìŠµë‹ˆë‹¤!\n" + "ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!");
    }

    private void initialStage() {
        Map<String, List<String>> initialMap = stageRepository.getStageMaps();
        for (String key : initialMap.keySet()) {
            stageMaps.add(StageMap.makeStage(key, initialMap.get(key)));
        }
    }
```
- ```startStage``` : ìì‹ ì˜ ``stageMaps``ë¥¼ ì´ˆê¸°í™” í•˜ê³ , ``StageMap``ì„ í•˜ë‚˜ì”© êº¼ë‚´ GameControllerì—ê²Œ ì „ë‹¬í•˜ë©° ê²Œì„ì„ ì§„í–‰í•œë‹¤.
- ``initialStage`` : ``StageRepository``ë¡œ ë¶€í„° ì´ˆê¸°í™” ëœ ì§€ë„ì˜ key, valueë¥¼ ì „ë‹¬ë°›ì•„ ``StageMap``ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ``stageMaps``Listì— ì¶”ê°€í•˜ì—¬ ì´ˆê¸°í™”í•œë‹¤.

<br>

### 3. StageMap
> **movePlayer : Playerì˜ ì›€ì§ì„ ì—¬ë¶€ë¥¼ ê²°ì •** 
```java
    public void movePlayer(DirectionValue dValue) {
        int xTemp = position.getPosX() + dValue.getXValue();
        int yTemp = position.getPosY() + dValue.getYValue();
        decideMoving(dValue, xTemp, yTemp, stageMap[xTemp][yTemp]);
    }
```
- dValueë¥¼ í™œìš©í•˜ì—¬ ì´ë™ ì˜ˆì • ìœ„ì¹˜ë¥¼ ë§Œë“¤ê³ , ```decideMoving```ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ì—¬ ì›€ì§ì„ì„ ê²°ì •í•˜ë„ë¡ í•œë‹¤.

<br>

> **decideMoving : ë‹¤ìŒ ë¸”ë¡ ìƒíƒœì— ë”°ë¼ ì›€ì§ì„ì„ ê²°ì •**
```java
    private void decideMoving(DirectionValue dValue, int xTemp, int yTemp, int newBlock) {
        // ë²½ì¼ ê²½ìš° ëª» ì›€ì§ì¸ë‹¤.
        if (newBlock == INT_WALL) {
            moveImpossible(dValue);
            return;
        }
        // êµ¬ë© ë˜ëŠ” ê³µë°±ì¼ ê²½ìš°
        if (newBlock == INT_HALL || newBlock == INT_VOID) {
            moveToHoleOrVoid(dValue, xTemp, yTemp, newBlock);
        }
        // ê³µì´ê±°ë‚˜ ì±„ì›Œì§„ ìƒíƒœì¼ ê²½ìš°
        if (newBlock == INT_BALL || newBlock == INT_BALL_WITH_HALL) {
            moveToBallOrFillStatus(dValue, xTemp, yTemp, newBlock);
        }
    }
```
- ``newBlock(ë‹¤ìŒ ë¸”ë¡ì˜ ìƒíƒœ)``ì— ë”°ë¼ì„œ êµ¬ë¶„í•˜ì—¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë°©í–¥ì„ ê²°ì •í•œë‹¤.

<br>

> **moveImpossible : ìœ„ì¹˜ ì´ë™ ë¶ˆê°€**
```java
    private void moveImpossible(DirectionValue dValue) {
        printOnlyStageMap();
        System.out.println(dValue.getSign() + ": " + "(ê²½ê³ !) í•´ë‹¹ ëª…ë ¹ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
    }
```
- ìœ„ì¹˜ ì´ë™ ë¶ˆê°€ ì‹œ, í˜„ì¬ ì§€ë„ ìƒíƒœ ë° ê²½ê³ ë¥¼ ì¶œë ¥í•œë‹¤.

<br>

> **moveToHoleOrVoid : ìƒˆë¡œìš´ ë¸”ë¡ì´ êµ¬ë© ë˜ëŠ” ë¹ˆ ì˜ì—­ì¸ ê²½ìš°**
```java
    private void moveToHoleOrVoid(DirectionValue dValue, int xTemp, int yTemp, int newBlock) {
        decideBeforePlayerPositionStatus();
        decidePlayerPosition(dValue, xTemp, yTemp, newBlock);
        turnCount++;
    }
```
- ì›€ì§ì´ê¸° ì „ playerì˜ ìƒíƒœì— ë”°ë¼ í•´ë‹¹ ìœ„ì¹˜ë¥¼ ì–´ë–¤ ê±¸ë¡œ ì±„ìš¸ì§€ë¥¼ ê²°ì •í•˜ëŠ” ```decideBeforePlayerPosition```ì„ í˜¸ì¶œí•œë‹¤.
- ìƒˆ ìœ„ì¹˜ë¥¼ ì–´ë–¤ valueë¡œ ì±„ì›Œì•¼í•  ì§€ ê²°ì •í•˜ëŠ” ``decidePlayerPosition``ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.

<br>

> **moveToBallOrFillStatus : ìƒˆë¡œìš´ ë¸”ë¡ì´ ë³¼ í˜¹ì€ ì±„ì›Œì§„ ìƒíƒœ(ë³¼ + êµ¬ë©)ì¸ ê²½ìš°**
```java
    private void moveToBallOrFillStatus(DirectionValue dValue, int xTemp, int yTemp, int newBlock) {
        int nx = xTemp + dValue.getXValue();
        int ny = yTemp + dValue.getYValue();
        // ì‹±íƒœ ë’¤ì— ë²½ ë˜ëŠ” ìƒˆë¡œìš´ ê³µ, ì±„ì›Œì§„ ìƒíƒœ ìˆë‹¤ë©´ ì´ë™ ë¶ˆê°€
        if (stageMap[nx][ny] == INT_WALL || stageMap[nx][ny] == INT_BALL || stageMap[nx][ny] == INT_BALL_WITH_HALL) {
            moveImpossible(dValue);
            return;
        }
        // ë¹ˆ ë•…ì´ë¼ë©´
        if (stageMap[nx][ny] == INT_VOID) {
            stageMap[nx][ny] = INT_BALL; // ê³µìœ¼ë¡œ ì±„ìš°ê¸°
        }
        // êµ¬ë©ì´ë¼ë©´
        if (stageMap[nx][ny] == INT_HALL) {
            stageMap[nx][ny] = INT_BALL_WITH_HALL; // ê³µ + êµ¬ë©ìœ¼ë¡œ ì±„ìš°ê¸°
        }
        decideBeforePlayerPositionStatus();
        decidePlayerPosition(dValue, xTemp, yTemp, newBlock);
        turnCount++;
    }
```
- ë³¼ì„ ì›€ì§ì¼ ê²½ìš°ì—ëŠ”, ì´ë™ ë°©í–¥ìœ¼ë¡œ í•œ ì¹¸ ë” ìˆëŠ” ìƒíƒœì— ëŒ€í•œ í™•ì¸ì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ nx, nyì— í•´ë‹¹ ìœ„ì¹˜ë¥¼ ì €ì¥í•œë‹¤.
- ë‹¤ìŒ ìˆœì„œë¡œ ì§„í–‰ëœë‹¤.
    1. ìƒíƒœ ë’¤ê°€ ë²½, ìƒˆë¡œìš´ ê³µ, ì±„ì›Œì§„ ìƒíƒœ(ê³µ + êµ¬ë©)ì¸ ê²½ìš° ì´ë™ ë¶ˆê°€ì´ë¯€ë¡œ,```moveImpossible```ë¥¼ í˜¸ì¶œí•˜ê³  return í•œë‹¤.
    2. í•´ë‹¹ ìœ„ì¹˜ê°€ ë¹ˆ ìœ„ì¹˜ë¼ë©´ ê³µìœ¼ë¡œ ì±„ìš´ë‹¤.
    3. í•´ë‹¹ ìœ„ì¹˜ê°€ êµ¬ë©ì´ë¼ë©´ ê³µ + êµ¬ë© ìƒíƒœë¡œ ì±„ìš´ë‹¤.
    4. ì›€ì§ì´ê¸° ì „ playerì˜ ìƒíƒœì— ë”°ë¼ í•´ë‹¹ ìœ„ì¹˜ë¥¼ ì–´ë–¤ê±¸ë¡œ ì±„ìš¸ì§€ë¥¼ ê²°ì •í•˜ëŠ” ```decideBeforePlayerPosition```ì„ í˜¸ì¶œí•œë‹¤.
    5. ì´ë™ í›„ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ë¥¼ ê²°ì •í•˜ëŠ” ```decidePlayerPosition```ì„ í˜¸ì¶œí•œë‹¤.
  
<br>

> **decideBeforePlayerPositionStatus : ê¸°ì¡´ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ì— ì–´ë–¤ê±¸ ì±„ìš¸ì§€ ê²°ì •**

```java
    private void decideBeforePlayerPositionStatus() {
        if (stageMap[position.getPosX()][position.getPosY()] == INT_PLAYER) {
            stageMap[position.getPosX()][position.getPosY()] = INT_VOID;
        }
        if (stageMap[position.getPosX()][position.getPosY()] == INT_PLAYER_WITH_HALL) {
            stageMap[position.getPosX()][position.getPosY()] = INT_HALL;
        }
    }
```
- ê¸°ì¡´ ìœ„ì¹˜ì— í”Œë ˆì´ì–´ë§Œ ìˆì—ˆë‹¤ë©´ ê³µë°±ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
- ê¸°ì¡´ ìœ„ì¹˜ì— í”Œë ˆì´ì–´ì™€ êµ¬ë©ì´ í•¨ê»˜ ìˆì—ˆë‹¤ë©´, êµ¬ë©ìœ¼ë¡œ ë³€ê²½í•œë‹¤. 

<br>


> **decidePlayerPosition : ìƒˆë¡œ ê²°ì •ëœ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ì— ì–´ë–¤ê±¸ ì±„ìš¸ì§€ ê²°ì •**
```java
    private void decidePlayerPosition(DirectionValue dValue, int xTemp, int yTemp, int newBlock) {
        if (newBlock == INT_HALL || newBlock == INT_BALL_WITH_HALL) { // ìƒˆë¡œìš´ ìœ„ì¹˜ê°€ ê³µ + êµ¬ë©ì´ì—ˆë‹¤ë©´, í”Œë ˆì´ì–´ + ê³µìœ¼ë¡œ ì±„ìš´ë‹¤.
            mappingPlayerPosition(dValue, xTemp, yTemp, INT_PLAYER_WITH_HALL);
        }
        if (newBlock == INT_BALL || newBlock == INT_VOID) { // ìƒˆë¡œìš´ ìœ„ì¹˜ê°€ ê·¸ëƒ¥ ê³µ ìœ„ì¹˜ì˜€ë‹¤ë©´, í”Œë ˆì´ì–´ë¡œ ì±„ìš´ë‹¤.
            mappingPlayerPosition(dValue, xTemp, yTemp, INT_PLAYER);
        }
    }
```
- ìƒˆë¡œ ì´ë™í•  ìœ„ì¹˜ê°€ êµ¬ë©ì´ê±°ë‚˜ ë³¼ + êµ¬ë©ì´ì—ˆë‹¤ë©´, í”Œë ˆì´ì–´ + êµ¬ë©ìœ¼ë¡œ ì±„ìš´ë‹¤.
- ìƒˆë¡œ ì´ë™í•  ìœ„ì¹˜ê°€ ë³¼ì´ê±°ë‚˜ ê³µë°±ì´ì—ˆë‹¤ë©´, í”Œë ˆì´ì–´ë¡œë§Œ ì±„ìš´ë‹¤.

<br>

> **mappingPlayerPosition : ìƒˆë¡œ ê²°ì •ëœ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ì— ì–´ë–¤ê±¸ ì±„ìš¸ì§€ ê²°ì •**
```java
    private void mappingPlayerPosition(DirectionValue dValue, int xTemp, int yTemp, int nextStatus) {
        stageMap[xTemp][yTemp] = nextStatus;
        position.moveToHere(xTemp, yTemp);
        printOnlyStageMap();
        System.out.println(dValue.getSign() + ": " + dValue.getDirectionName() + "ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
    }
```
- stageMapì— ìµœì¢… í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ ìƒíƒœë¥¼ ë°˜ì˜í•˜ê³ , ì‹¤ì œ positionì„ ì˜®ê¸´ë‹¤.
- ì„±ê³µì ìœ¼ë¡œ ì´ë™í•˜ì˜€ìœ¼ë¯€ë¡œ ìƒíƒœë¥¼ ì¶œë ¥í•œë‹¤.

<br>

> **isFinished : stage ì¢…ë£Œ ì—¬ë¶€ë¥¼ í™•ì¸**
```java
    public boolean isFinished() {
        return holeAndBallCount == countingFill();
    }
```
- ``countingFill``ë©”ì„œë“œë¥¼ í†µí•´ ì±„ì›Œì§„(ë³¼ + êµ¬ë©) ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ê³ , ì´ë¥¼ ì „ì²´ ë³¼ì˜ ìˆ˜ì™€ ë¹„êµí•œë‹¤.
- trueì¼ ê²½ìš°, ëª¨ë“  ë³¼-êµ¬ë© ìŒì´ ì¼ì¹˜í•˜ë¯€ë¡œ stageë¥¼ ì¢…ë£Œí•œë‹¤.

<br>

### 4. PlayerPosition : ë³€ê²½ì‚¬í•­ ì—†ìŒ

<br>

### 5. ValueMapper : Constant ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½

<br>

### 6. DirectionValue : ë³€ê²½ ì‚¬í•­ ì—†ìŒ

<br>

### 7. GameController
> **gameStart : StageMapì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì…ë ¥ì„ ë°›ì•„ ê²Œì„ ì‹œì‘**
```java
    public static void gameStart(StageMap stageMap, StageRepository stageRepository) {
        stageMap.printStatus();
        List<Character> inputs = InputView.requestInputFromUser();
        while (true) {
            for (Character input : inputs) {
                if (input == 'r') {
                    stageMap = resetStage(stageMap, stageRepository);
                    continue;
                }
                moveByInput(stageMap, input);
            }
            if (isFinished(stageMap, inputs)) {
                return;
            }
            inputs = InputView.requestInputFromUser();
        }
    }
```
- ```resetStage```ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ StageMapì„ ë¦¬ì…‹ì‹œí‚¤ëŠ” ì‘ì—…ì´ ì¶”ê°€ë˜ì—ˆë‹¤.
- ```isFinished```ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì¢…ë£Œ ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ëŠ” ì‘ì—…ì´ ì¶”ê°€ë˜ì—ˆë‹¤.

<br>

> **resetStage, initialStageMap : ì´ˆê¸°í™” ëœ StageMapì„ ë°˜í™˜**
```java
    private static StageMap resetStage(StageMap stageMap, StageRepository stageRepository) {
        stageMap = initialStageMap(stageMap, stageRepository);
        stageMap.printOnlyStageMap();
        return stageMap;
    }

    private static StageMap initialStageMap(StageMap stageMap, StageRepository stageRepository) {
        String stageNumber = stageMap.getStageNumber();
        List<String> initialMapValue = stageRepository.getStageMaps().get(stageNumber);
        System.out.println(stageNumber + "ê°€ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤.");
        return StageMap.makeStage(stageNumber, initialMapValue);
    }
```
- ```initialStageMap``` : StageRepositoryë¡œ ë¶€í„° ì´ˆê¸°í™”ëœ ì§€ë„ë¥¼ ì´ìš©í•˜ì—¬ ìƒˆë¡œìš´ ```StageMap```ì„ ìƒì„±í•˜ì—¬ ë°˜í™˜í•œë‹¤.
- ``resetStage`` : ìƒˆë¡œìš´ ```StageMap```ì˜ ìƒíƒœë¥¼ ì¶œë ¥í•˜ê³  ë°˜í™˜í•œë‹¤.

<br>

> **isFinished : ì¢…ë£Œ ì—¬ë¶€ í™•ì¸**
```java
    private static boolean isFinished(StageMap stageMap, List<Character> inputs) {
        if (inputs.contains('q') || stageMap.isFinished()) {
            System.out.println("\n< ë¹ ë°¤! " + stageMap.getStageNumber() + " í´ë¦¬ì–´! >");
            System.out.println("[ í„´ìˆ˜ : " + stageMap.getTurnCount() + " ]\n");
            return true;
        }
        return false;
    }
```
- që¥¼ í¬í•¨í•˜ê³  ìˆê±°ë‚˜, StageMapì´ ëª¨ë‘ ê³µ+êµ¬ë© ìƒíƒœê°€ ë˜ì–´ ì¢…ë£Œë˜ì—ˆì„ ê²½ìš° ì¶•í•˜ ë©”ì‹œì§€ì™€ í„´ ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤. 

<br>

### 8. InputView
> **makeMapInformation : íŒŒì¼ ì…ë ¥ ì²˜ë¦¬**

```java
    public static String makeMapInformation(String fileName) {
        StringBuilder sb = new StringBuilder();
        try {
            BufferedReader br = new BufferedReader(new FileReader(fileName));
            String line;
            while ((line = br.readLine()) != null) {
                sb.append(line).append("\n");
            }
        } catch (IOException e) {
            System.out.println(e.getMessage());
            System.out.println("[ERROR] ìœ íš¨í•œ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.");
        }
        return sb.toString();
    }
```
- fileName ê²½ë¡œì— ìˆëŠ” í…ìŠ¤íŠ¸ íŒŒì¼ì„ ì½ì–´ Stringbuilderë¡œ ë¬¶ì€ í›„, ë°˜í™˜í•˜ëŠ” ë¡œì§ì´ë‹¤.

<br>

### 9. Constant(ì¶”ê°€) : static finalë¡œ ê¸°ë³¸ ìë£Œí˜•ì— ì˜ë¯¸ë¥¼ ë¶€ì—¬í•œë‹¤.

<br>

### 10. StageRepository(ì¶”ê°€)

> **ë³€ìˆ˜ ë° ìƒì„±ì**
```java
    private static final StageRepository stageRepository = new StageRepository(new LinkedHashMap<>());
    private static final Map<Character, Integer> basicValue = ValueMapper.getBasicValue();
    private final Map<String, List<String>> stageMaps;

    private StageRepository(Map<String, List<String>> stageMaps) {
        this.stageMaps = stageMaps;
    }

    public static StageRepository makeRepository() {
        return stageRepository;
    }
```
- ```stageMaps```ì— ì´ˆê¸°í™”ëœ ì§€ë„ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ```StageMap```ê°ì²´ë¥¼ resetí•œë‹¤.
- ì´ˆê¸°í™” í›„ ìƒíƒœ ë³€ê²½ì´ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì‹±ê¸€í†¤ìœ¼ë¡œ ì„¤ê³„í•˜ì˜€ë‹¤. ```makeRepository``` ë©”ì„œë“œë¥¼ í†µí•´ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆë‹¤.

<br>

> **MakeInnerMapValue** : ê¸°ì¡´ StageMapReaderì˜ ë¡œì§ì„ í™œìš©í•œë‹¤.
```java
    public void makeInnerMapValue(String input) {
        String[] split = input.split("\n");
        String stageNumber = "";
        List<String> tempStage = new ArrayList<>();
        for (int i = 0; i < split.length; i++) {
            if (split[i].contains("Stage")) {
                stageNumber = split[i].trim();
                continue;
            }
            if (split[i].contains(String.valueOf(CHAR_DIVIDE_STAGE))) {
                stageMaps.put(stageNumber, tempStage);
                tempStage = new ArrayList<>();
                continue;
            }
            tempStage.add(changeToNumber(split[i]));
            if (i == split.length - 1) {
                stageMaps.put(stageNumber, tempStage);
                break;
            }
        }
    }
```
- inputì„ ```Map<String, List<String>```ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë¶„í•´ ë° ì €ì¥í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.
